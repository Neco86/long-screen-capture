(self.webpackChunklongScreenCaptrue=self.webpackChunklongScreenCaptrue||[]).push([[371],{38447:function($){$.exports={container:"container___25KpS",imgWrapper:"imgWrapper___1H15N",bgWrapper:"bgWrapper___3a88B",bgActiveWrapper:"bgActiveWrapper___3A124",resizer:"resizer___1GnU4",topResizer:"topResizer___3xUNS",bottomResizer:"bottomResizer___3pxMW",activeResizer:"activeResizer___1ekuG"}},75941:function($){$.exports={wrapper:"wrapper___3iih1",downloadButton:"downloadButton___mQFDU"}},29495:function($,J,z){"use strict";z.r(J),z.d(J,{default:function(){return Ce}});var se=z(58954);function x(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return d};var d={},o=Object.prototype,t=o.hasOwnProperty,r=typeof Symbol=="function"?Symbol:{},s=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",h=r.toStringTag||"@@toStringTag";function i(n,e,c){return Object.defineProperty(n,e,{value:c,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{i({},"")}catch(n){i=function(c,f,p){return c[f]=p}}function a(n,e,c,f){var p=e&&e.prototype instanceof w?e:w,b=Object.create(p.prototype),A=new C(f||[]);return b._invoke=function(T,H,j){var Z="suspendedStart";return function(_,oe){if(Z==="executing")throw new Error("Generator is already running");if(Z==="completed"){if(_==="throw")throw oe;return W()}for(j.method=_,j.arg=oe;;){var ie=j.delegate;if(ie){var Q=N(ie,j);if(Q){if(Q===g)continue;return Q}}if(j.method==="next")j.sent=j._sent=j.arg;else if(j.method==="throw"){if(Z==="suspendedStart")throw Z="completed",j.arg;j.dispatchException(j.arg)}else j.method==="return"&&j.abrupt("return",j.arg);Z="executing";var V=m(T,H,j);if(V.type==="normal"){if(Z=j.done?"completed":"suspendedYield",V.arg===g)continue;return{value:V.arg,done:j.done}}V.type==="throw"&&(Z="completed",j.method="throw",j.arg=V.arg)}}}(n,c,A),b}function m(n,e,c){try{return{type:"normal",arg:n.call(e,c)}}catch(f){return{type:"throw",arg:f}}}d.wrap=a;var g={};function w(){}function M(){}function S(){}var L={};i(L,s,function(){return this});var O=Object.getPrototypeOf,E=O&&O(O(P([])));E&&E!==o&&t.call(E,s)&&(L=E);var I=S.prototype=w.prototype=Object.create(L);function v(n){["next","throw","return"].forEach(function(e){i(n,e,function(c){return this._invoke(e,c)})})}function R(n,e){function c(p,b,A,T){var H=m(n[p],n,b);if(H.type!=="throw"){var j=H.arg,Z=j.value;return Z&&(0,se.Z)(Z)=="object"&&t.call(Z,"__await")?e.resolve(Z.__await).then(function(_){c("next",_,A,T)},function(_){c("throw",_,A,T)}):e.resolve(Z).then(function(_){j.value=_,A(j)},function(_){return c("throw",_,A,T)})}T(H.arg)}var f;this._invoke=function(p,b){function A(){return new e(function(T,H){c(p,b,T,H)})}return f=f?f.then(A,A):A()}}function N(n,e){var c=n.iterator[e.method];if(c===void 0){if(e.delegate=null,e.method==="throw"){if(n.iterator.return&&(e.method="return",e.arg=void 0,N(n,e),e.method==="throw"))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var f=m(c,n.iterator,e.arg);if(f.type==="throw")return e.method="throw",e.arg=f.arg,e.delegate=null,g;var p=f.arg;return p?p.done?(e[n.resultName]=p.value,e.next=n.nextLoc,e.method!=="return"&&(e.method="next",e.arg=void 0),e.delegate=null,g):p:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function u(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function k(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function C(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(u,this),this.reset(!0)}function P(n){if(n){var e=n[s];if(e)return e.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length)){var c=-1,f=function p(){for(;++c<n.length;)if(t.call(n,c))return p.value=n[c],p.done=!1,p;return p.value=void 0,p.done=!0,p};return f.next=f}}return{next:W}}function W(){return{value:void 0,done:!0}}return M.prototype=S,i(I,"constructor",S),i(S,"constructor",M),M.displayName=i(S,h,"GeneratorFunction"),d.isGeneratorFunction=function(n){var e=typeof n=="function"&&n.constructor;return!!e&&(e===M||(e.displayName||e.name)==="GeneratorFunction")},d.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,S):(n.__proto__=S,i(n,h,"GeneratorFunction")),n.prototype=Object.create(I),n},d.awrap=function(n){return{__await:n}},v(R.prototype),i(R.prototype,l,function(){return this}),d.AsyncIterator=R,d.async=function(n,e,c,f,p){p===void 0&&(p=Promise);var b=new R(a(n,e,c,f),p);return d.isGeneratorFunction(e)?b:b.next().then(function(A){return A.done?A.value:b.next()})},v(I),i(I,h,"Generator"),i(I,s,function(){return this}),i(I,"toString",function(){return"[object Generator]"}),d.keys=function(n){var e=[];for(var c in n)e.push(c);return e.reverse(),function f(){for(;e.length;){var p=e.pop();if(p in n)return f.value=p,f.done=!1,f}return f.done=!0,f}},d.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var c in this)c.charAt(0)==="t"&&t.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var c=this;function f(j,Z){return A.type="throw",A.arg=e,c.next=j,Z&&(c.method="next",c.arg=void 0),!!Z}for(var p=this.tryEntries.length-1;p>=0;--p){var b=this.tryEntries[p],A=b.completion;if(b.tryLoc==="root")return f("end");if(b.tryLoc<=this.prev){var T=t.call(b,"catchLoc"),H=t.call(b,"finallyLoc");if(T&&H){if(this.prev<b.catchLoc)return f(b.catchLoc,!0);if(this.prev<b.finallyLoc)return f(b.finallyLoc)}else if(T){if(this.prev<b.catchLoc)return f(b.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<b.finallyLoc)return f(b.finallyLoc)}}}},abrupt:function(e,c){for(var f=this.tryEntries.length-1;f>=0;--f){var p=this.tryEntries[f];if(p.tryLoc<=this.prev&&t.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var b=p;break}}b&&(e==="break"||e==="continue")&&b.tryLoc<=c&&c<=b.finallyLoc&&(b=null);var A=b?b.completion:{};return A.type=e,A.arg=c,b?(this.method="next",this.next=b.finallyLoc,g):this.complete(A)},complete:function(e,c){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&c&&(this.next=c),g},finish:function(e){for(var c=this.tryEntries.length-1;c>=0;--c){var f=this.tryEntries[c];if(f.finallyLoc===e)return this.complete(f.completion,f.afterLoc),k(f),g}},catch:function(e){for(var c=this.tryEntries.length-1;c>=0;--c){var f=this.tryEntries[c];if(f.tryLoc===e){var p=f.completion;if(p.type==="throw"){var b=p.arg;k(f)}return b}}throw new Error("illegal catch attempt")},delegateYield:function(e,c,f){return this.delegate={iterator:P(e),resultName:c,nextLoc:f},this.method==="next"&&(this.arg=void 0),g}},d}var ue=z(86582);function X(d,o,t,r,s,l,h){try{var i=d[l](h),a=i.value}catch(m){t(m);return}i.done?o(a):Promise.resolve(a).then(r,s)}function Y(d){return function(){var o=this,t=arguments;return new Promise(function(r,s){var l=d.apply(o,t);function h(a){X(l,r,s,h,i,"next",a)}function i(a){X(l,r,s,h,i,"throw",a)}h(void 0)})}}var D=z(2824),ce=z(75941),q=z.n(ce),U=z(8870);function le(d,o){if(d==null)return{};var t={},r=Object.keys(d),s,l;for(l=0;l<r.length;l++)s=r[l],!(o.indexOf(s)>=0)&&(t[s]=d[s]);return t}function fe(d,o){if(d==null)return{};var t=le(d,o),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(d);for(s=0;s<l.length;s++)r=l[s],!(o.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(d,r)||(t[r]=d[r]))}return t}var y=z(67294),he=z(38447),B=z.n(he),G=z(85893),ve=["onMove","baseInfo"],ee=function(o){var t=o.onMove,r=o.baseInfo,s=fe(o,ve),l=(0,y.useState)(!1),h=(0,D.Z)(l,2),i=h[0],a=h[1],m=(0,y.useState)(0),g=(0,D.Z)(m,2),w=g[0],M=g[1],S=(0,y.useState)(null),L=(0,D.Z)(S,2),O=L[0],E=L[1],I=(0,y.useCallback)(function(u){var k,C,P,W=(k=u==null||(C=u.touches)===null||C===void 0||(P=C[0])===null||P===void 0?void 0:P.clientY)!==null&&k!==void 0?k:u==null?void 0:u.clientY;M(W),E(r),a(!0)},[r]),v=(0,y.useCallback)(function(u){if(u.preventDefault(),i){var k,C,P,W=(k=u==null||(C=u.touches)===null||C===void 0||(P=C[0])===null||P===void 0?void 0:P.clientY)!==null&&k!==void 0?k:u==null?void 0:u.clientY;t&&t(W-w,O)}},[i,w,t,O]),R=(0,y.useCallback)(function(){a(!1)},[]),N=(0,y.useRef)();return(0,y.useEffect)(function(){var u=N.current;return u.addEventListener("mousedown",I,{passive:!1}),u.addEventListener("touchstart",I,{passive:!1}),u.addEventListener("mousemove",v,{passive:!1}),u.addEventListener("touchmove",v,{passive:!1}),u.addEventListener("mouseup",R,{passive:!1}),u.addEventListener("touchend",R,{passive:!1}),function(){u.removeEventListener("mousedown",I),u.removeEventListener("touchstart",I),u.removeEventListener("mousemove",v),u.removeEventListener("touchmove",v),u.removeEventListener("mouseup",R),u.removeEventListener("touchend",R)}},[I,v,R]),(0,G.jsx)("div",(0,U.Z)({ref:N},s))},de=function(o){var t=o.src,r=o.active,s=o.onClick,l=o.index,h=o.showActive,i=o.setImgInfo,a=(0,y.useMemo)(function(){return(0,U.Z)({width:0,height:0,naturalWidth:0,naturalHeight:0,top:0,bottom:0},o.imgInfo)},[o.imgInfo]),m=(0,y.useMemo)(function(){return a.width?a.naturalWidth/a.width:1},[a]),g=(0,y.useCallback)(function(E){var I=E.target,v=I.width,R=I.height,N=I.naturalWidth,u=I.naturalHeight,k={img:E.target,width:v,height:R,naturalWidth:N,naturalHeight:u,top:a.top||0,bottom:a.bottom||u};i((0,U.Z)((0,U.Z)({},a),k))},[a,i]),w=(0,y.useCallback)(function(E,I){var v=I.top+E*m;v<0?v=0:v>I.bottom&&(v=I.bottom),i((0,U.Z)((0,U.Z)({},a),{},{bottom:I.bottom,top:v}))},[i,a,m]),M=(0,y.useCallback)(function(E,I){var v=I.bottom+E*m;v<I.top?v=I.top:v>a.naturalHeight&&(v=a.naturalHeight),i((0,U.Z)((0,U.Z)({},a),{},{bottom:v,top:I.top}))},[a,i,m]),S=(0,y.useMemo)(function(){return{top:"-".concat(a.top/m,"px")}},[a,m]),L=(0,y.useMemo)(function(){return{opacity:r||h?1:.5,height:(a.bottom-a.top)/m,overflow:r?"":"hidden"}},[r,a,h,m]),O=(0,y.useCallback)(function(E){return E.preventDefault(),E.stopPropagation(),s(l),!1},[s,l]);return(0,G.jsxs)("div",{className:B().container,style:L,children:[(0,G.jsx)("div",{className:B().imgWrapper,children:(0,G.jsx)("img",{src:t,onLoad:g,style:S})}),(0,G.jsx)("div",{className:"".concat(B().bgWrapper," ").concat(r?B().bgActiveWrapper:""),children:(0,G.jsx)("img",{src:t,style:S})}),(0,G.jsxs)("div",{className:"".concat(B().resizer," ").concat(r?B().activeResizer:""),onClick:O,children:[(0,G.jsx)(ee,{className:B().topResizer,baseInfo:a,onMove:w}),(0,G.jsx)(ee,{className:B().bottomResizer,baseInfo:a,onMove:M})]})]})},pe=(0,y.memo)(de),me=function(o){if(!!o.length){var t=o[0].naturalWidth,r=o.reduce(function(M,S){return M+(S.bottom-S.top)},0),s=document.createElement("canvas"),l=s.getContext("2d");s.width=t,s.height=r;for(var h=0,i=0;i<o.length;i++){var a=o[i],m=a.bottom-a.top;l.drawImage(a.img,0,a.top,t,m,0,h,t,m),h+=m}var g=s.toDataURL("image/png"),w=document.createElement("a");w.download="longScreenCapture_".concat(Date.now(),".png"),w.href=g,w.click()}},ge=me,we=function(){var d=Y(x().mark(function o(t,r){var s,l,h;return x().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.currentTime=r,a.next=3,new Promise(function(m){t.onseeked=m});case 3:return s=document.createElement("canvas"),l=s.getContext("2d"),s.width=t.videoWidth,s.height=t.videoHeight,h="",a.next=10,new Promise(function(m){l.drawImage(t,0,0,s.width,s.height),s.toBlob(function(g){h=URL.createObjectURL(g),m(h)})});case 10:return a.abrupt("return",h);case 11:case"end":return a.stop()}},o)}));return function(t,r){return d.apply(this,arguments)}}(),ye=function(){var d=Y(x().mark(function o(t,r,s){var l,h,i,a,m;return x().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:l=[],h=Math.floor(t.duration/r)+1,i=0;case 3:if(!(i<=t.duration)){w.next=12;break}return s&&(a=Math.round((i+r)/r),s(a,h)),w.next=7,we(t,i);case 7:m=w.sent,l.push(m);case 9:i+=r,w.next=3;break;case 12:return w.abrupt("return",l);case 13:case"end":return w.stop()}},o)}));return function(t,r,s){return d.apply(this,arguments)}}(),Ie=function(){var d=Y(x().mark(function o(t){var r,s,l,h;return x().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.src,s=t.onProcess,l=t.step,h=l===void 0?.5:l,a.abrupt("return",new Promise(function(m){var g=document.createElement("video");g.muted=!0,g.autoplay=!0,g.src=r,g.onloadeddata=Y(x().mark(function w(){var M;return x().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,ye(g,h,s);case 2:M=L.sent,m(M);case 4:case"end":return L.stop()}},w)}))}));case 2:case"end":return a.stop()}},o)}));return function(t){return d.apply(this,arguments)}}(),be=Ie,te=new Worker("./worker.js"),F={},re=function(o){return F[o]||(F[o]=new Promise(function(t){var r=new Image;r.onload=function(){t(r)},r.src=o})),F[o]},Se=function(o,t){var r=document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});r.width=o.width,r.height=o.height,s.drawImage(o,0,0);var l=s.getImageData(0,0,r.width,r.height);s.drawImage(t,0,0);var h=s.getImageData(0,0,r.width,r.height);return te.postMessage({method:"getOffsetInfo",args:{data1:l,data2:h,counters1:o.counters,counters2:t.counters}}),new Promise(function(i){te.onmessage=function(a){o.counters=a.data.counters1,t.counters=a.data.counters2,i(a.data)}})},ke=function(){var d=Y(x().mark(function o(t){var r,s,l,h,i,a,m,g,w,M,S,L,O,E;return x().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:r=t.images,s=t.onProcess,l=[],h=r.length,i=0;case 4:if(!(i<r.length-1)){v.next=19;break}return s&&s(i+1,h),v.next=8,re(r[i]);case 8:return a=v.sent,v.next=11,re(r[i+1]);case 11:return m=v.sent,v.next=14,Se(a,m);case 14:g=v.sent,l.push(g);case 16:i++,v.next=4;break;case 19:for(s&&s(h,h),w=[],M=0,S=0;S<l.length;S++)L=S?l[S-1].y2:0,O=l[S].y1,E=M+O-L,E>0?(w.push({src:r[S],top:L+(M<0?E:0),bottom:O}),M=0):M=E;return r.length>1&&w.push({src:r[r.length-1],top:l[r.length-2].y2,bottom:0}),v.abrupt("return",w);case 25:case"end":return v.stop()}},o)}));return function(t){return d.apply(this,arguments)}}(),ne=ke,ae=30,K={CHOSE_PAGE:0,SLICE_PAGE:1},Pe=null,Ee=function(o){var t=o.imgInfos,r=o.setImgInfos,s=(0,y.useRef)(),l=(0,y.useState)(-1),h=(0,D.Z)(l,2),i=h[0],a=h[1],m=(0,y.useState)(!0),g=(0,D.Z)(m,2),w=g[0],M=g[1],S=(0,y.useMemo)(function(){var u;return(u=t[0])!==null&&u!==void 0&&u.width?t[0].naturalWidth/t[0].width:1},[t]),L=(0,y.useMemo)(function(){return i===-1},[i]),O=(0,y.useMemo)(function(){var u=t.reduce(function(k,C){return k+((C==null?void 0:C.top)||0)},0)/S||0;return u+ae},[t,S]),E=(0,y.useMemo)(function(){var u=t[t.length-1],k=((u.naturalHeight-u.bottom)/S||0)+ae;return k},[t,S]),I=(0,y.useMemo)(function(){return{paddingTop:O,paddingBottom:E}},[O,E]);(0,y.useEffect)(function(){if(w){var u=!t.find(function(k){return!k.height});u&&(M(!1),s.current.scrollTop=O)}},[t,w,O]);var v=(0,y.useCallback)(function(u){a(i===u?-1:u)},[i]),R=(0,y.useCallback)(function(){a(-1)},[]),N=(0,y.useCallback)(function(u,k){return r(function(C){return C.map(function(P,W){return u===W?k:P})})},[r]);return(0,G.jsxs)("div",{className:q().wrapper,style:I,ref:s,onClick:R,children:[t.map(function(u,k){return(0,G.jsx)(pe,{src:u.src,active:i===k,index:k,showActive:L,imgInfo:t[k],setImgInfo:function(P){return N(k,P)},onClick:v},k)}),L&&(0,G.jsx)("button",{onClick:function(){return ge(t)},className:q().downloadButton,children:"download"})]})},Le=function(o){var t=o.setPage,r=o.setImgInfos,s=(0,y.useState)(""),l=(0,D.Z)(s,2),h=l[0],i=l[1],a=(0,y.useState)(""),m=(0,D.Z)(a,2),g=m[0],w=m[1],M=(0,y.useCallback)(function(L){return function(){var O=document.createElement("input");O.type="file",O.accept="image/*",O.multiple=!0,O.onchange=function(){var E=Y(x().mark(function I(v){var R,N,u,k;return x().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(R=v.target.files||[],!R.length){P.next=16;break}if(N=(0,ue.Z)(R).map(function(W){return URL.createObjectURL(W)}),!L){P.next=13;break}return i("1/1"),P.next=7,ne({images:N,onProcess:function(n,e){w("".concat((n/e*100).toFixed(0),"%"))}});case 7:u=P.sent,i(""),w(""),r(u),P.next=15;break;case 13:k=N.map(function(W){return{src:W}}),r(k);case 15:t(K.SLICE_PAGE);case 16:case"end":return P.stop()}},I)}));return function(I){return E.apply(this,arguments)}}(),O.click()}},[r,t]),S=(0,y.useCallback)(function(){var L=document.createElement("input");L.type="file",L.accept="video/*",L.onchange=function(){var O=Y(x().mark(function E(I){var v,R,N,u;return x().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(v=I.target.files||[],!v.length){C.next=13;break}return R=URL.createObjectURL(v[0]),i("1/2"),C.next=6,be({src:R,onProcess:function(W,n){w("".concat((W/n*100).toFixed(0),"%"))}});case 6:return N=C.sent,i("2/2"),C.next=10,ne({images:N,onProcess:function(W,n){w("".concat((W/n*100).toFixed(0),"%"))}});case 10:u=C.sent,r(u),t(K.SLICE_PAGE);case 13:case"end":return C.stop()}},E)}));return function(E){return O.apply(this,arguments)}}(),L.click()},[r,t]);return(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{onClick:M(!1),children:"chose images"}),(0,G.jsx)("div",{onClick:M(!0),children:"chose images(auto)"}),(0,G.jsx)("div",{onClick:S,children:"chose video(auto)"}),h&&g&&(0,G.jsx)("div",{children:"".concat(g,"(").concat(h,")")})]})},Ce=function(){var d=(0,y.useState)(K.CHOSE_PAGE),o=(0,D.Z)(d,2),t=o[0],r=o[1],s=(0,y.useState)([]),l=(0,D.Z)(s,2),h=l[0],i=l[1];return t===K.SLICE_PAGE?(0,G.jsx)(Ee,{imgInfos:h,setImgInfos:i}):(0,G.jsx)(Le,{setPage:r,setImgInfos:i})}}}]);
